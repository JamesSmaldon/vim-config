set nocompatible "required for vundle
filetype off "required for vundle


" rtp (runtimepaths) is a list of comma seperated paths, the first 
" of which is the vimfiles directory
let $VIMFILESDIR=split(&rtp, ",")[0]

let $VIMTIPS="$VIMFILESDIR/vimtips.md"

set rtp+=$VIMFILESDIR/bundle/Vundle.vim

if has('gui_running')
    call vundle#begin('$VIMFILESDIR/bundle/')
    Plugin 'VundleVim/Vundle.vim'
    Plugin 'tpope/vim-fugitive'             " Git wrapper plugin
    Plugin 'sjl/badwolf'                    " Colour scheme
    Plugin 'ctrlpvim/ctrlp.vim'             " Fuzzy search for files etc.
    Plugin 'vim-airline/vim-airline'        " powerline style plugin in pure vimscript
    Plugin 'scrooloose/nerdtree'            " Tree based navigation of filesystem
    Plugin 'dkprice/vim-easygrep'           " Find and replace text across multiple files.
    Plugin 'ludovicchabant/vim-lawrencium'  " mercurial support
    Plugin 'yegappan/mru'                   " A better recent files list
    call vundle#end()
endif

filetype plugin indent on " required by vundle

" Make the ctrlp plugin display up to 100 results rather than the default of
" 10
let g:ctrlp_match_window = 'results:100'

" Add VCS support to vim-airline plugin
let g:airline#extensions#branch#use_vcscommand = 1

set tabstop=4
set shiftwidth=4
set softtabstop=4
set expandtab " tabs are spaces
set smarttab
set ignorecase " ignore case when searching
set smartcase
set laststatus=2    "Always display the status bar.
set incsearch " Make searches incremental

set number " enable line numbers
syntax on " syntax highlighting

if has('gui_running')
    silent! colorscheme badwolf
endif

set cursorline " highlight current line
set wildmenu " graphical auto-complete menu for tab completion
set showmatch " highlight matching parentheses
set hlsearch " highlight search matches
set path=.,,** " Search path for opening new files etc.

autocmd BufRead,BufNewFile  *.txt setlocal tw=80
autocmd BufRead,BufNewFile  *.txt setlocal spell spelllang=en_gb

" Make backspace behave correctly.
set backspace=indent,eol,start

if has("win32")
    set guifont=Consolas:h10
else
    set guifont=Inconsolata\ 9
endif

" Open explore window for current buffer path
nmap <F11> :!start explorer /e,%:p:h<CR>
imap <F11> <Esc><F11>

" Open command prompt for current buffer path
nmap <F12> :!start cmd %:p:h<CR>
imap <F12> <Esc><F12>

" Refresh current file
map <F5> :e<CR>G
imap <F5> <Esc><F5>
